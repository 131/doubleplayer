!function(){return function e(n,t,r){function o(a,l){if(!t[a]){if(!n[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=t[a]={exports:{}};n[a][0].call(u.exports,function(e){return o(n[a][1][e]||e)},u,u.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}}()({1:[function(e,n,t){"use strict";window.DoublePlayer=e("./"),window.BlendHelper=e("./helper")},{"./":3,"./helper":4}],2:[function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var o=e("udom/element/create"),i=e("udom/element/onRemove"),a=e("eventemitter-co"),l=e("udom/window/requestAnimationFrame"),c=function(e){function n(e,t,r,i,a,c){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var s=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),u=e.type,d=e.url;if(s.container=t,s.container.innerHTML="",console.log("Media src is : ",d),"video"==u){var b=o("video",{loop:!0,autoplay:!0,src:""});b.addEventListener("loadedmetadata",function(){b.ready?console.log("META DATA ALREADY LOADED !"):(console.log("Loadedd metadata"),b.ready=!0,s.media_ready(b,b.videoWidth,b.videoHeight))}),l(function(){b.src=d+"#"+Math.random(),b.play()})}if(s.blendColor=r||[1,1,1],s.blendOpacity=i||0,s.blendMode=a||0,s.blendPosition=c||0,"image"==u){var f=o("img",{src:d+"#"+Math.random(),crossOrigin:"IVS"});f.addEventListener("load",function(){console.log("Loadedd metadata"),s.media_ready(f,f.naturalWidth,f.naturalHeight)})}return s}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,a),r(n,[{key:"pause",value:function(){this.media_dom[this.media_dom.paused?"play":"pause"]()}},{key:"media_ready",value:function(e,n,t){this.emit("mediaLoaded"),this.media_dom=e,this.media_width=n,this.media_height=t;var r=this.prepareCanvas(),o=this.initWebGL(r);this.initShaders(o),this.initBuffers(o),this.gl=o,this.timerCallback=this.timerCallback.bind(this),this.timerCallback()}},{key:"initShaders",value:function(e){var n=this.getShader(e,"\n\nprecision mediump float;\nuniform sampler2D sm;\nvarying vec2 tx;\nuniform int  mode;\nuniform vec3 shaderBlend;\nuniform float shaderOpacity;\nuniform int blendPosition;\n\nfloat blendAdd(float base, float blend) {\n\treturn min(base+blend,1.0);\n}\n\nvec3 blendAdd(vec3 base, vec3 blend) {\n\treturn min(base+blend,vec3(1.0));\n}\n\nvec3 blendAdd(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAdd(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 blendAverage(vec3 base, vec3 blend) {\n\treturn (base+blend)/2.0;\n}\n\nvec3 blendAverage(vec3 base, vec3 blend, float opacity) {\n\treturn (blendAverage(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendColorBurn(float base, float blend) {\n\treturn (blend==0.0)?blend:max((1.0-((1.0-base)/blend)),0.0);\n}\n\nvec3 blendColorBurn(vec3 base, vec3 blend) {\n\treturn vec3(blendColorBurn(base.r,blend.r),blendColorBurn(base.g,blend.g),blendColorBurn(base.b,blend.b));\n}\n\nvec3 blendColorBurn(vec3 base, vec3 blend, float opacity) {\n\treturn (blendColorBurn(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendColorDodge(float base, float blend) {\n\treturn (blend==1.0)?blend:min(base/(1.0-blend),1.0);\n}\n\nvec3 blendColorDodge(vec3 base, vec3 blend) {\n\treturn vec3(blendColorDodge(base.r,blend.r),blendColorDodge(base.g,blend.g),blendColorDodge(base.b,blend.b));\n}\n\nvec3 blendColorDodge(vec3 base, vec3 blend, float opacity) {\n\treturn (blendColorDodge(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendDarken(float base, float blend) {\n\treturn min(blend,base);\n}\n\nvec3 blendDarken(vec3 base, vec3 blend) {\n\treturn vec3(blendDarken(base.r,blend.r),blendDarken(base.g,blend.g),blendDarken(base.b,blend.b));\n}\n\nvec3 blendDarken(vec3 base, vec3 blend, float opacity) {\n\treturn (blendDarken(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 blendDifference(vec3 base, vec3 blend) {\n\treturn abs(base-blend);\n}\n\nvec3 blendDifference(vec3 base, vec3 blend, float opacity) {\n\treturn (blendDifference(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 blendExclusion(vec3 base, vec3 blend) {\n\treturn base+blend-2.0*base*blend;\n}\n\nvec3 blendExclusion(vec3 base, vec3 blend, float opacity) {\n\treturn (blendExclusion(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendReflect(float base, float blend) {\n\treturn (blend==1.0)?blend:min(base*base/(1.0-blend),1.0);\n}\n\nvec3 blendReflect(vec3 base, vec3 blend) {\n\treturn vec3(blendReflect(base.r,blend.r),blendReflect(base.g,blend.g),blendReflect(base.b,blend.b));\n}\n\nvec3 blendReflect(vec3 base, vec3 blend, float opacity) {\n\treturn (blendReflect(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 blendGlow(vec3 base, vec3 blend) {\n\treturn blendReflect(blend,base);\n}\n\nvec3 blendGlow(vec3 base, vec3 blend, float opacity) {\n\treturn (blendGlow(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendOverlay(float base, float blend) {\n\treturn base<0.5?(2.0*base*blend):(1.0-2.0*(1.0-base)*(1.0-blend));\n}\n\nvec3 blendOverlay(vec3 base, vec3 blend) {\n\treturn vec3(blendOverlay(base.r,blend.r),blendOverlay(base.g,blend.g),blendOverlay(base.b,blend.b));\n}\n\nvec3 blendOverlay(vec3 base, vec3 blend, float opacity) {\n\treturn (blendOverlay(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 blendHardLight(vec3 base, vec3 blend) {\n\treturn blendOverlay(blend,base);\n}\n\nvec3 blendHardLight(vec3 base, vec3 blend, float opacity) {\n\treturn (blendHardLight(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendVividLight(float base, float blend) {\n\treturn (blend<0.5)?blendColorBurn(base,(2.0*blend)):blendColorDodge(base,(2.0*(blend-0.5)));\n}\n\nvec3 blendVividLight(vec3 base, vec3 blend) {\n\treturn vec3(blendVividLight(base.r,blend.r),blendVividLight(base.g,blend.g),blendVividLight(base.b,blend.b));\n}\n\nvec3 blendVividLight(vec3 base, vec3 blend, float opacity) {\n\treturn (blendVividLight(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendHardMix(float base, float blend) {\n\treturn (blendVividLight(base,blend)<0.5)?0.0:1.0;\n}\n\nvec3 blendHardMix(vec3 base, vec3 blend) {\n\treturn vec3(blendHardMix(base.r,blend.r),blendHardMix(base.g,blend.g),blendHardMix(base.b,blend.b));\n}\n\nvec3 blendHardMix(vec3 base, vec3 blend, float opacity) {\n\treturn (blendHardMix(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendLighten(float base, float blend) {\n\treturn max(blend,base);\n}\n\nvec3 blendLighten(vec3 base, vec3 blend) {\n\treturn vec3(blendLighten(base.r,blend.r),blendLighten(base.g,blend.g),blendLighten(base.b,blend.b));\n}\n\nvec3 blendLighten(vec3 base, vec3 blend, float opacity) {\n\treturn (blendLighten(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendLinearBurn(float base, float blend) {\n\t// Note : Same implementation as BlendSubtractf\n\treturn max(base+blend-1.0,0.0);\n}\n\nvec3 blendLinearBurn(vec3 base, vec3 blend) {\n\t// Note : Same implementation as BlendSubtract\n\treturn max(base+blend-vec3(1.0),vec3(0.0));\n}\n\nvec3 blendLinearBurn(vec3 base, vec3 blend, float opacity) {\n\treturn (blendLinearBurn(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendLinearDodge(float base, float blend) {\n\t// Note : Same implementation as BlendAddf\n\treturn min(base+blend,1.0);\n}\n\nvec3 blendLinearDodge(vec3 base, vec3 blend) {\n\t// Note : Same implementation as BlendAdd\n\treturn min(base+blend,vec3(1.0));\n}\n\nvec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {\n\treturn (blendLinearDodge(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendLinearLight(float base, float blend) {\n\treturn blend<0.5?blendLinearBurn(base,(2.0*blend)):blendLinearDodge(base,(2.0*(blend-0.5)));\n}\n\nvec3 blendLinearLight(vec3 base, vec3 blend) {\n\treturn vec3(blendLinearLight(base.r,blend.r),blendLinearLight(base.g,blend.g),blendLinearLight(base.b,blend.b));\n}\n\nvec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {\n\treturn (blendLinearLight(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 blendMultiply(vec3 base, vec3 blend) {\n\treturn base*blend;\n}\n\nvec3 blendMultiply(vec3 base, vec3 blend, float opacity) {\n\treturn (blendMultiply(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 blendNegation(vec3 base, vec3 blend) {\n\treturn vec3(1.0)-abs(vec3(1.0)-base-blend);\n}\n\nvec3 blendNegation(vec3 base, vec3 blend, float opacity) {\n\treturn (blendNegation(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 blendNormal(vec3 base, vec3 blend) {\n\treturn blend;\n}\n\nvec3 blendNormal(vec3 base, vec3 blend, float opacity) {\n\treturn (blendNormal(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 blendPhoenix(vec3 base, vec3 blend) {\n\treturn min(base,blend)-max(base,blend)+vec3(1.0);\n}\n\nvec3 blendPhoenix(vec3 base, vec3 blend, float opacity) {\n\treturn (blendPhoenix(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendPinLight(float base, float blend) {\n\treturn (blend<0.5)?blendDarken(base,(2.0*blend)):blendLighten(base,(2.0*(blend-0.5)));\n}\n\nvec3 blendPinLight(vec3 base, vec3 blend) {\n\treturn vec3(blendPinLight(base.r,blend.r),blendPinLight(base.g,blend.g),blendPinLight(base.b,blend.b));\n}\n\nvec3 blendPinLight(vec3 base, vec3 blend, float opacity) {\n\treturn (blendPinLight(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendScreen(float base, float blend) {\n\treturn 1.0-((1.0-base)*(1.0-blend));\n}\n\nvec3 blendScreen(vec3 base, vec3 blend) {\n\treturn vec3(blendScreen(base.r,blend.r),blendScreen(base.g,blend.g),blendScreen(base.b,blend.b));\n}\n\nvec3 blendScreen(vec3 base, vec3 blend, float opacity) {\n\treturn (blendScreen(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendSoftLight(float base, float blend) {\n\treturn (blend<0.5)?(2.0*base*blend+base*base*(1.0-2.0*blend)):(sqrt(base)*(2.0*blend-1.0)+2.0*base*(1.0-blend));\n}\n\nvec3 blendSoftLight(vec3 base, vec3 blend) {\n\treturn vec3(blendSoftLight(base.r,blend.r),blendSoftLight(base.g,blend.g),blendSoftLight(base.b,blend.b));\n}\n\nvec3 blendSoftLight(vec3 base, vec3 blend, float opacity) {\n\treturn (blendSoftLight(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat blendSubtract(float base, float blend) {\n\treturn max(base+blend-1.0,0.0);\n}\n\nvec3 blendSubtract(vec3 base, vec3 blend) {\n\treturn max(base+blend-vec3(1.0),vec3(0.0));\n}\n\nvec3 blendSubtract(vec3 base, vec3 blend, float opacity) {\n\treturn (blendSubtract(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat HueToRGB(float f1, float f2, float hue)\n{\n\tif (hue < 0.0)\n\t\thue += 1.0;\n\telse if (hue > 1.0)\n\t\thue -= 1.0;\n\tfloat res;\n\tif ((6.0 * hue) < 1.0)\n\t\tres = f1 + (f2 - f1) * 6.0 * hue;\n\telse if ((2.0 * hue) < 1.0)\n\t\tres = f2;\n\telse if ((3.0 * hue) < 2.0)\n\t\tres = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n\telse\n\t\tres = f1;\n\treturn res;\n}\n\nvec3 HSLToRGB(vec3 hsl)\n{\n\tvec3 rgb;\n\t\n\tif (hsl.y == 0.0)\n\t\trgb = vec3(hsl.z); // Luminance\n\telse\n\t{\n\t\tfloat f2;\n\t\t\n\t\tif (hsl.z < 0.5)\n\t\t\tf2 = hsl.z * (1.0 + hsl.y);\n\t\telse\n\t\t\tf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\n\t\t\t\n\t\tfloat f1 = 2.0 * hsl.z - f2;\n\t\t\n\t\trgb.r = HueToRGB(f1, f2, hsl.x + (1.0/3.0));\n\t\trgb.g = HueToRGB(f1, f2, hsl.x);\n\t\trgb.b= HueToRGB(f1, f2, hsl.x - (1.0/3.0));\n\t}\n\t\n\treturn rgb;\n}\n\nvec3 RGBToHSL(vec3 color)\n{\n\tvec3 hsl; // init to 0 to avoid warnings ? (and reverse if + remove first part)\n\t\n\tfloat fmin = min(min(color.r, color.g), color.b);    //Min. value of RGB\n\tfloat fmax = max(max(color.r, color.g), color.b);    //Max. value of RGB\n\tfloat delta = fmax - fmin;             //Delta RGB value\n\n\thsl.z = (fmax + fmin) / 2.0; // Luminance\n\n\tif (delta == 0.0)\t\t//This is a gray, no chroma...\n\t{\n\t\thsl.x = 0.0;\t// Hue\n\t\thsl.y = 0.0;\t// Saturation\n\t}\n\telse                                    //Chromatic data...\n\t{\n\t\tif (hsl.z < 0.5)\n\t\t\thsl.y = delta / (fmax + fmin); // Saturation\n\t\telse\n\t\t\thsl.y = delta / (2.0 - fmax - fmin); // Saturation\n\t\t\n\t\tfloat deltaR = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\n\t\tfloat deltaG = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\n\t\tfloat deltaB = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\n\n\t\tif (color.r == fmax )\n\t\t\thsl.x = deltaB - deltaG; // Hue\n\t\telse if (color.g == fmax)\n\t\t\thsl.x = (1.0 / 3.0) + deltaR - deltaB; // Hue\n\t\telse if (color.b == fmax)\n\t\t\thsl.x = (2.0 / 3.0) + deltaG - deltaR; // Hue\n\n\t\tif (hsl.x < 0.0)\n\t\t\thsl.x += 1.0; // Hue\n\t\telse if (hsl.x > 1.0)\n\t\t\thsl.x -= 1.0; // Hue\n\t}\n\n\treturn hsl;\n}\n\n// Hue Blend mode creates the result color by combining the luminance and saturation of the base color with the hue of the blend color.\nvec3 BlendHue(vec3 base, vec3 blend)\n{\n\tvec3 baseHSL = RGBToHSL(base);\n\treturn HSLToRGB(vec3(RGBToHSL(blend).r, baseHSL.g, baseHSL.b));\n}\n\nvec3 BlendHue(vec3 base, vec3 blend, float opacity) {\n\treturn (BlendHue(base, blend) * opacity + base * (1.0 - opacity));\n}\n\n// Saturation Blend mode creates the result color by combining the luminance and hue of the base color with the saturation of the blend color.\nvec3 BlendSaturation(vec3 base, vec3 blend)\n{\n\tvec3 baseHSL = RGBToHSL(base);\n\treturn HSLToRGB(vec3(baseHSL.r, RGBToHSL(blend).g, baseHSL.b));\n}\n\nvec3 BlendSaturation(vec3 base, vec3 blend, float opacity) {\n\treturn (BlendSaturation(base, blend) * opacity + base * (1.0 - opacity));\n}\n\n// Color Mode keeps the brightness of the base color and applies both the hue and saturation of the blend color.\nvec3 BlendColor(vec3 base, vec3 blend)\n{\n\tvec3 blendHSL = RGBToHSL(blend);\n\treturn HSLToRGB(vec3(blendHSL.r, blendHSL.g, RGBToHSL(base).b));\n}\n\nvec3 BlendColor(vec3 base, vec3 blend, float opacity) {\n\treturn (BlendColor(base, blend) * opacity + base * (1.0 - opacity));\n}\n\n// Luminosity Blend mode creates the result color by combining the hue and saturation of the base color with the luminance of the blend color.\nvec3 BlendLuminosity(vec3 base, vec3 blend)\n{\n\tvec3 baseHSL = RGBToHSL(base);\n\treturn HSLToRGB(vec3(baseHSL.r, baseHSL.g, RGBToHSL(blend).b));\n}\n\nvec3 BlendLuminosity(vec3 base, vec3 blend, float opacity) {\n\treturn (BlendLuminosity(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 blendFunc(int mode, vec3 base, vec3 blend, float opacity) {\n    vec3 returnedValue = base;\n    if(mode == 1) {\n        returnedValue = blendAdd(base, blend, opacity);\n\t} if(mode == 2) {\n      returnedValue = blendAverage(base, blend, opacity);\n    } if(mode == 3) {\n        returnedValue = blendColorBurn(base, blend, opacity);\n    } if(mode == 4) {\n        returnedValue = blendColorDodge(base, blend, opacity);\n    } if(mode == 5) {\n        returnedValue = blendDarken(base, blend, opacity);\n    } if(mode == 6) {\n        returnedValue = blendDifference(base, blend, opacity);\n    } if(mode == 7) {\n        returnedValue = blendExclusion(base, blend, opacity);\n    } if(mode == 8) {\n        returnedValue = blendGlow(base, blend, opacity);\n    } if(mode == 9) {\n        returnedValue = blendHardLight(base, blend, opacity);\n    } if(mode == 10) {\n        returnedValue = blendHardMix(base, blend, opacity);\n    } if(mode == 11) {\n        returnedValue = blendLighten(base, blend, opacity);\n    } if(mode == 12) {\n        returnedValue = blendLinearBurn(base, blend, opacity);\n    } if(mode == 13) {\n        returnedValue = blendLinearDodge(base, blend, opacity);\n    } if(mode == 14) {\n        returnedValue = blendLinearLight(base, blend, opacity);\n    } if(mode == 15) {\n        returnedValue = blendMultiply(base, blend, opacity);\n    } if(mode == 16) {\n        returnedValue = blendNegation(base, blend, opacity);\n    } if(mode == 17) {\n        returnedValue = blendNormal(base, blend, opacity);\n    } if(mode == 18) {\n        returnedValue = blendOverlay(base, blend, opacity);\n    }  if(mode == 19) {\n        returnedValue = blendPhoenix(base, blend, opacity);\n    }  if(mode == 20) {\n        returnedValue = blendPinLight(base, blend, opacity);\n    }  if(mode == 21) {\n        returnedValue = blendReflect(base, blend, opacity);\n    }  if(mode == 22) {\n        returnedValue = blendScreen(base, blend, opacity);\n    } if(mode == 23) {\n        returnedValue = blendSoftLight(base, blend, opacity);\n    } if(mode == 24) {\n        returnedValue = blendSubtract(base, blend, opacity);\n    } if(mode == 25) {\n        returnedValue = blendVividLight(base, blend, opacity);\n    } if(mode == 26) {\n        returnedValue = BlendHue(base, blend, opacity);\n    } if(mode == 27) {\n        returnedValue = BlendSaturation(base, blend, opacity);\n    } if(mode == 28) {\n        returnedValue = BlendColor(base, blend, opacity);\n    } if(mode == 29) {\n        returnedValue = BlendLuminosity(base, blend, opacity);\n    }\n\treturn returnedValue;\n}\n\nvoid main(void) {\n    vec4 test = texture2D(sm,tx);\n    vec3 color = blendFunc(mode, test.rgb, shaderBlend, shaderOpacity);\n\n    if(blendPosition == 0) {\n      gl_FragColor = test;\n    } if(blendPosition == 3) {\n      gl_FragColor = vec4(color, 1.0);\n    } if(blendPosition == 2) {\n      if((0.5 - tx.x) < 0.0) {\n        gl_FragColor = vec4(color, 1.0);;\n      } else {\n          gl_FragColor = test;\n      }\n    } if(blendPosition == 1) {\n      if((0.5 - tx.x) > 0.0) {\n        gl_FragColor = vec4(color, 1.0);;\n      } else {\n          gl_FragColor = test;\n      }\n    }\n}\n",e.FRAGMENT_SHADER),t=this.getShader(e,"\n  attribute vec2 vx;\n  varying   vec2 tx;\n  uniform float xFactor;\n  uniform float imgFac;\n\n\n  void main(void) {\n    float vxx   = vx.x * ( 1.0 - xFactor) + xFactor;\n    gl_Position = vec4((vx.x * 2.0* xFactor - 1.0) * imgFac + (1.0 - imgFac) * (vxx *2.0 - 1.0)  , 1.0 - vx.y * 2.0, 0, 1);\n    tx          = vec2((vx.x*xFactor/2.0)*imgFac + (1.0-imgFac)*(vxx / 2.0 + 0.5) , vx.y);\n  }\n",e.VERTEX_SHADER);if(this.mediaShaderProgram=e.createProgram(),e.attachShader(this.mediaShaderProgram,t),e.attachShader(this.mediaShaderProgram,n),e.linkProgram(this.mediaShaderProgram),!e.getProgramParameter(this.mediaShaderProgram,e.LINK_STATUS))throw"Unable to initialize the shader program: "+e.getProgramInfoLog(this.mediaShaderProgram);var r=this.getShader(e,"void main(void){gl_FragColor=vec4(1,1,1,1);}",e.FRAGMENT_SHADER),o=this.getShader(e,"attribute vec3 c;void main(void){gl_Position=vec4(c, 1.0);}",e.VERTEX_SHADER);if(this.vertShader=e.createProgram(),e.attachShader(this.vertShader,r),e.attachShader(this.vertShader,o),e.linkProgram(this.vertShader),!e.getProgramParameter(this.vertShader,e.LINK_STATUS))throw"Unable to initialize the shader vertShader: "+e.getProgramInfoLog(this.vertShader)}},{key:"getShader",value:function(e,n,t){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(alert("An error occurred compiling the shaders: "+e.getShaderInfoLog(r)),null)}},{key:"initBuffers",value:function(e){this.vx=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vx),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),e.STATIC_DRAW),this.ix=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.ix),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),e.STATIC_DRAW),this.vertexBuf=e.createBuffer(),this.tex=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.tex),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)}},{key:"initWebGL",value:function(e){var n=e.getContext("experimental-webgl");return n.clearColor(0,0,0,1),n.clearDepth(1),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL),n}},{key:"prepareCanvas",value:function(){var e=this,n=o("canvas",{width:this.media_width/2,height:this.media_height});n.style.width=n.style.height="100%",this.container.appendChild(n),this.delimiter=.5;var t=0,r=0,a=function(n){t=n.clientX/document.body.offsetWidth,r=n.clientY/document.body.offsetHeight,e.delimiter=t,e.emit("cursor",t,r)},l=function(n){t=n.touches[0].clientX/document.body.offsetWidth,r=n.touches[0].clientY/document.body.offsetHeight,e.delimiter=t,e.emit("cursor",t,r)};return document.addEventListener("mousemove",a,!1),document.addEventListener("touchmove",l,!1),i(n,function(){console.log("Cleaning up everything");var n=e.gl;document.removeEventListener("mousemove",a),document.removeEventListener("touchmove",l),n.deleteTexture(e.tex),n.deleteBuffer(e.vx),n.deleteBuffer(e.ix),n.deleteBuffer(e.vertexBuf),n.clearColor(0,0,0,1),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT),e.media_dom=null,n=null,e.requestId&&(window.cancelAnimationFrame(e.requestId),e.requestId=void 0)}),this.uTimeout=Math.random(),window.globalTimeout=this.uTimeout,n}},{key:"timerCallback",value:function(){this.uTimeout==window.globalTimeout?(this.computeFrame(),this.requestId=l(this.timerCallback)):console.log("//kthxby")}},{key:"computeFrame",value:function(){var e=this.gl;e.clear(e.COLOR_BUFFER_BIT),e.useProgram(this.mediaShaderProgram),this.vx_ptr=e.getAttribLocation(this.mediaShaderProgram,"vx"),e.enableVertexAttribArray(this.vx_ptr),e.uniform1i(e.getUniformLocation(this.mediaShaderProgram,"sm"),0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.tex),e.texImage2D(e.TEXTURE_2D,0,e.RGB,e.RGB,e.UNSIGNED_BYTE,this.media_dom);var n=this.media_width/2,t=(c=Math.max(1,Math.min(n-1,n*this.delimiter)))/this.media_width*2,r=e.getUniformLocation(this.mediaShaderProgram,"xFactor");e.uniform1f(r,t);r=e.getUniformLocation(this.mediaShaderProgram,"imgFac");e.uniform1f(r,0);var o=e.getUniformLocation(this.mediaShaderProgram,"shaderBlend");e.uniform3fv(o,this.blendColor);var i=e.getUniformLocation(this.mediaShaderProgram,"shaderOpacity");e.uniform1f(i,this.blendOpacity);var a=e.getUniformLocation(this.mediaShaderProgram,"mode");e.uniform1i(a,this.blendMode);var l=e.getUniformLocation(this.mediaShaderProgram,"blendPosition");e.uniform1i(l,this.blendPosition),e.bindBuffer(e.ARRAY_BUFFER,this.vx),e.vertexAttribPointer(this.vx_ptr,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.ix),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0);r=e.getUniformLocation(this.mediaShaderProgram,"xFactor");e.uniform1f(r,t);r=e.getUniformLocation(this.mediaShaderProgram,"imgFac");e.uniform1f(r,1),e.bindBuffer(e.ARRAY_BUFFER,this.vx),e.vertexAttribPointer(this.vx_ptr,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.ix),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),e.useProgram(this.vertShader),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuf);var c=2*t-1;e.bufferData(e.ARRAY_BUFFER,new Float32Array([-.01+c,1,0,-.01+c,-1,0,.01+c,-1,0,.01+c,-1,0,-.01+c,1,0,.01+c,1,0]),e.STATIC_DRAW);var s=e.getAttribLocation(this.vertShader,"c");e.vertexAttribPointer(s,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(s),e.drawArrays(e.TRIANGLES,0,6)}}]),n}();n.exports=c},{"eventemitter-co":8,"udom/element/create":27,"udom/element/onRemove":28,"udom/window/requestAnimationFrame":29}],3:[function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var o=e("./doublemedia"),i=e("eventemitter-co"),a=function(e){function n(e,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return r.index=0,r.elements=e,r.container=t,r}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,i),r(n,[{key:"switch",value:function(e){var n,t;this.index+=e,this.play((n=this.index,t=this.elements.length,(n%t+t)%t))}},{key:"play",value:function(e){this.index=e;var n=this.elements[this.index];this.emit("mediaLoading",n),this.container.innerHTML="",this.doublemedia=new o(n,this.container),this.doublemedia.on("mediaLoaded",this.emit.bind(this,"mediaLoaded",n)),this.doublemedia.on("cursor",this.emit.bind(this,"cursor"))}},{key:"setBlendMode",value:function(e,n,t,r){this.doublemedia&&(this.doublemedia.blendColor=e,this.doublemedia.blendOpacity=n,this.doublemedia.blendMode=t,this.doublemedia.blendPosition=r)}},{key:"pause",value:function(){this.doublemedia.pause()}}]),n}();n.exports=a},{"./doublemedia":2,"eventemitter-co":8}],4:[function(e,n,t){"use strict";n.exports=function(e){if(e){var n=document.createElement("div"),t=document.createElement("input");t.type="color",t.value="#ffffff";var r=document.createElement("input");r.type="number",r.min="number",r.max="number",r.step="0.05",r.value="0";var o=document.createElement("select");["add","Average","ColorBurn","ColorDodge","Darken","Difference","Exclusion","Glow","HardLight","HardMix","Lighten","LinearBurn","LinearDodge","LinearLight","Multiply","Negation","Normal","Overlay","Phoenix","PinLight","Reflect","Screen","SoftLight","Subtract","VividLight","Hue","Saturation","Color","Luminosity"].forEach(function(e,n){var t=document.createElement("option");t.value=n+1,t.innerHTML=e,o.appendChild(t)});var i=document.createElement("select");[0,1,2,3].forEach(function(e,n){var t=document.createElement("option");t.value=n,t.innerHTML=e,i.appendChild(t)}),n.appendChild(t),n.appendChild(r),n.appendChild(o),n.appendChild(i);var a=function(){var n,a;e.setBlendMode((n=t.value,a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n),[parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255]),r.value,o.value,i.value)};return n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("change",a),r.addEventListener("change",a),o.addEventListener("change",a),i.addEventListener("change",a),n}}},{}],5:[function(e,n,t){"use strict";n.exports=function(e,n){"string"==typeof n&&(n=[n]);for(var t=0;t<n.length;t++)e[n[t]]&&(e[n[t]]=e[n[t]].bind(e));return e}},{}],6:[function(e,n,t){"use strict";var r="undefined"==typeof Promise?e("es6-promise").Promise:Promise,o=Array.prototype.slice;function i(e){var n=this,t=o.call(arguments,1);return new r(function(r,o){if("function"==typeof e&&(e=e.apply(n,t)),!e||"function"!=typeof e.next)return r(e);function i(n){var t;try{t=e.next(n)}catch(e){return o(e)}s(t)}function c(n){var t;try{t=e.throw(n)}catch(e){return o(e)}s(t)}function s(e){if(e.done)return r(e.value);var t=a.call(n,e.value);return t&&l(t)?t.then(i,c):c(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(e.value)+'"'))}i()})}function a(e){return e?l(e)?e:function(e){var n=e.constructor;return!!n&&("GeneratorFunction"===n.name||"GeneratorFunction"===n.displayName||c(n.prototype))}(e)||c(e)?i.call(this,e):"function"==typeof e?function(e){var n=this;return new r(function(t,r){e.call(n,function(e,n){if(e)return r(e);arguments.length>2&&(n=o.call(arguments,1)),t(n)})})}.call(this,e):Array.isArray(e)?function(e){return r.all(e.map(a,this))}.call(this,e):Object==e.constructor?function(e){for(var n=new e.constructor,t=Object.keys(e),o=[],i=0;i<t.length;i++){var c=t[i],s=a.call(this,e[c]);s&&l(s)?u(s,c):n[c]=e[c]}return r.all(o).then(function(){return n});function u(e,t){n[t]=void 0,o.push(e.then(function(e){n[t]=e}))}}.call(this,e):e:e}function l(e){return"function"==typeof e.then}function c(e){return"function"==typeof e.next&&"function"==typeof e.throw}n.exports=i.default=i.co=i,i.wrap=function(e){return n.__generatorFunction__=e,n;function n(){return i.call(this,e.apply(this,arguments))}}},{"es6-promise":7}],7:[function(e,n,t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,o){"object"===(void 0===t?"undefined":r(t))&&void 0!==n?n.exports=o():"function"==typeof define&&define.amd?define(o):e.ES6Promise=o()}(void 0,function(){function n(e){return"function"==typeof e}var t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,a=void 0,l=function(e,n){h[o]=e,h[o+1]=n,2===(o+=2)&&(a?a(v):L())};var c="undefined"!=typeof window?window:void 0,s=c||{},u=s.MutationObserver||s.WebKitMutationObserver,d="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),b="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(v,1)}}var h=new Array(1e3);function v(){for(var e=0;e<o;e+=2){(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0}o=0}var p,m,y,g,L=void 0;function x(e,n){var t=this,r=new this.constructor(w);void 0===r[S]&&G(r);var o=t._state;if(o){var i=arguments[o-1];l(function(){return M(o,r,i,t._result)})}else k(t,r,e,n);return r}function _(e){if(e&&"object"===(void 0===e?"undefined":r(e))&&e.constructor===this)return e;var n=new this(w);return O(n,e),n}d?L=function(){return process.nextTick(v)}:u?(m=0,y=new u(v),g=document.createTextNode(""),y.observe(g,{characterData:!0}),L=function(){g.data=m=++m%2}):b?((p=new MessageChannel).port1.onmessage=v,L=function(){return p.port2.postMessage(0)}):L=void 0===c&&"function"==typeof e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(v)}:f()}catch(e){return f()}}():f();var S=Math.random().toString(36).substring(2);function w(){}var E=void 0,T=1,A=2,R={error:null};function B(e){try{return e.then}catch(e){return R.error=e,R}}function P(e,t,r){t.constructor===e.constructor&&r===x&&t.constructor.resolve===_?function(e,n){n._state===T?H(e,n._result):n._state===A?C(e,n._result):k(n,void 0,function(n){return O(e,n)},function(n){return C(e,n)})}(e,t):r===R?(C(e,R.error),R.error=null):void 0===r?H(e,t):n(r)?function(e,n,t){l(function(e){var r=!1,o=function(e,n,t,r){try{e.call(n,t,r)}catch(e){return e}}(t,n,function(t){r||(r=!0,n!==t?O(e,t):H(e,t))},function(n){r||(r=!0,C(e,n))},e._label);!r&&o&&(r=!0,C(e,o))},e)}(e,t,r):H(e,t)}function O(e,n){var t,o;e===n?C(e,new TypeError("You cannot resolve a promise with itself")):(o=void 0===(t=n)?"undefined":r(t),null===t||"object"!==o&&"function"!==o?H(e,n):P(e,n,B(n)))}function F(e){e._onerror&&e._onerror(e._result),D(e)}function H(e,n){e._state===E&&(e._result=n,e._state=T,0!==e._subscribers.length&&l(D,e))}function C(e,n){e._state===E&&(e._state=A,e._result=n,l(F,e))}function k(e,n,t,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=n,o[i+T]=t,o[i+A]=r,0===i&&e._state&&l(D,e)}function D(e){var n=e._subscribers,t=e._state;if(0!==n.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<n.length;a+=3)r=n[a],o=n[a+t],r?M(t,r,o,i):o(i);e._subscribers.length=0}}function M(e,t,r,o){var i=n(r),a=void 0,l=void 0,c=void 0,s=void 0;if(i){if((a=function(e,n){try{return e(n)}catch(e){return R.error=e,R}}(r,o))===R?(s=!0,l=a.error,a.error=null):c=!0,t===a)return void C(t,new TypeError("A promises callback cannot return that same promise."))}else a=o,c=!0;t._state!==E||(i&&c?O(t,a):s?C(t,l):e===T?H(t,a):e===A&&C(t,a))}var N=0;function G(e){e[S]=N++,e._state=void 0,e._result=void 0,e._subscribers=[]}var I=function(){function e(e,n){this._instanceConstructor=e,this.promise=new e(w),this.promise[S]||G(this.promise),t(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?H(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&H(this.promise,this._result))):C(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var n=0;this._state===E&&n<e.length;n++)this._eachEntry(e[n],n)},e.prototype._eachEntry=function(e,n){var t=this._instanceConstructor,r=t.resolve;if(r===_){var o=B(e);if(o===x&&e._state!==E)this._settledAt(e._state,n,e._result);else if("function"!=typeof o)this._remaining--,this._result[n]=e;else if(t===j){var i=new t(w);P(i,e,o),this._willSettleAt(i,n)}else this._willSettleAt(new t(function(n){return n(e)}),n)}else this._willSettleAt(r(e),n)},e.prototype._settledAt=function(e,n,t){var r=this.promise;r._state===E&&(this._remaining--,e===A?C(r,t):this._result[n]=t),0===this._remaining&&H(r,this._result)},e.prototype._willSettleAt=function(e,n){var t=this;k(e,void 0,function(e){return t._settledAt(T,n,e)},function(e){return t._settledAt(A,n,e)})},e}();var j=function(){function e(n){this[S]=N++,this._result=this._state=void 0,this._subscribers=[],w!==n&&("function"!=typeof n&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,n){try{n(function(n){O(e,n)},function(n){C(e,n)})}catch(n){C(e,n)}}(this,n):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})},e}();return j.prototype.then=x,j.all=function(e){return new I(this,e).promise},j.race=function(e){var n=this;return t(e)?new n(function(t,r){for(var o=e.length,i=0;i<o;i++)n.resolve(e[i]).then(t,r)}):new n(function(e,n){return n(new TypeError("You must pass an array to race."))})},j.resolve=_,j.reject=function(e){var n=new this(w);return C(n,e),n},j._setScheduler=function(e){a=e},j._setAsap=function(e){l=e},j._asap=l,j.polyfill=function(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var t=null;try{t=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===t&&!n.cast)return}e.Promise=j},j.Promise=j,j})},{}],8:[function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var o="undefined"==typeof Promise?e("es6-promise").Promise:Promise,i=e("bindthem"),a=e("co"),l=e("mout/object/forIn"),c=e("mout/random/guid"),s=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,["on","off","once","emit","addEvent","addListener","removeListener","removeAllListeners","fireEvent"]),this.callbacks={}}return r(e,[{key:"emit",value:function(e){if(!this.callbacks[e])return o.resolve();var n=[],t=Array.prototype.slice.call(arguments,1);return l(this.callbacks[e],function(e){var r=a.apply(e.ctx,[e.callback].concat(t));n.push(r)}),o.all(n)}},{key:"on",value:function(e,n,t){if("function"!=typeof n)return console.log("you try to register a non function in ",e);this.callbacks[e]||(this.callbacks[e]={}),this.callbacks[e][c()]={callback:n,ctx:t}}},{key:"once",value:function(e,n,t){var r=this,o=function t(){r.off(e,t),r.off(e,n)};this.on(e,n,t),this.on(e,o)}},{key:"off",value:function(e,n){e?n?l(this.callbacks[e]||{},function(t,r){t.callback==n&&delete this.callbacks[e][r]},this):this.callbacks[e]={}:this.callbacks={}}}]),e}();s.prototype.addEvent=s.prototype.on,s.prototype.addListener=s.prototype.on,s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=s.prototype.off,s.prototype.fireEvent=s.prototype.emit,n.exports=s},{bindthem:5,co:6,"es6-promise":7,"mout/object/forIn":16,"mout/random/guid":19}],9:[function(e,n,t){"use strict";n.exports=function(e,n,t){if(t=t||0,null==e)return-1;for(var r=e.length,o=t<0?r+t:t;o<r;){if(e[o]===n)return o;o++}return-1}},{}],10:[function(e,n,t){"use strict";var r=e("./indexOf");n.exports=function(e,n){for(var t=r(e,n);-1!==t;)e.splice(t,1),t=r(e,n,t)}},{"./indexOf":9}],11:[function(e,n,t){"use strict";var r=e("./isKind"),o=Array.isArray||function(e){return r(e,"Array")};n.exports=o},{"./isKind":12}],12:[function(e,n,t){"use strict";var r=e("./kindOf");n.exports=function(e,n){return r(e)===n}},{"./kindOf":13}],13:[function(e,n,t){"use strict";n.exports=function(e){return Object.prototype.toString.call(e).slice(8,-1)}},{}],14:[function(e,n,t){"use strict";n.exports=2147483647},{}],15:[function(e,n,t){"use strict";n.exports=-2147483648},{}],16:[function(e,n,t){"use strict";var r,o,i=e("./hasOwn");function a(e,n,t,r){return e.call(r,n[t],t,n)}n.exports=function(e,n,t){var l,c=0;for(l in null==r&&function(){for(var e in o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=!0,{toString:null})r=!1}(),e)if(!1===a(n,e,l,t))break;if(r)for(var s=e.constructor,u=!!s&&e===s.prototype;(l=o[c++])&&("constructor"===l&&(u||!i(e,l))||e[l]===Object.prototype[l]||!1!==a(n,e,l,t)););}},{"./hasOwn":17}],17:[function(e,n,t){"use strict";n.exports=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}},{}],18:[function(e,n,t){"use strict";var r=e("./randInt"),o=e("../lang/isArray");n.exports=function(e){var n=1===arguments.length&&o(e)?e:arguments;return n[r(0,n.length-1)]}},{"../lang/isArray":11,"./randInt":22}],19:[function(e,n,t){"use strict";var r=e("./randHex"),o=e("./choice");n.exports=function(){return r(8)+"-"+r(4)+"-4"+r(3)+"-"+o(8,9,"a","b")+r(3)+"-"+r(12)}},{"./choice":18,"./randHex":21}],20:[function(e,n,t){"use strict";var r=e("./random"),o=e("../number/MIN_INT"),i=e("../number/MAX_INT");n.exports=function(e,n){return(e=null==e?o:e)+((n=null==n?i:n)-e)*r()}},{"../number/MAX_INT":14,"../number/MIN_INT":15,"./random":23}],21:[function(e,n,t){"use strict";var r=e("./choice"),o="0123456789abcdef".split("");n.exports=function(e){e=e&&e>0?e:6;for(var n="";e--;)n+=r(o);return n}},{"./choice":18}],22:[function(e,n,t){"use strict";var r=e("../number/MIN_INT"),o=e("../number/MAX_INT"),i=e("./rand");n.exports=function(e,n){return e=null==e?r:~~e,n=null==n?o:~~n,Math.round(i(e-.5,n+.499999999999))}},{"../number/MAX_INT":14,"../number/MIN_INT":15,"./rand":20}],23:[function(e,n,t){"use strict";function r(){return r.get()}r.get=Math.random,n.exports=r},{}],24:[function(e,n,t){"use strict";var r=Function("return this")();n.exports=r.setImmediate||r.setTimeout},{}],25:[function(e,n,t){"use strict";var r=e("../async/setImmediate");n.exports=function(e,n){var t=[].slice.call(arguments,2);return function(){t.push.apply(t,arguments),r(function(){if(e)return e.apply(n,t)})}}},{"../async/setImmediate":24}],26:[function(e,n,t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="undefined"==typeof Promise?e("es6-promise").Promise:Promise;!function(e){var t,i=Object.prototype.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",c=a.toStringTag||"@@toStringTag",s="object"===(void 0===n?"undefined":r(n)),u=e.regeneratorRuntime;if(u)s&&(n.exports=u);else{(u=e.regeneratorRuntime=s?n.exports:{}).wrap=m;var d="suspendedStart",b="suspendedYield",f="executing",h="completed",v={},p=x.prototype=g.prototype;L.prototype=p.constructor=x,x.constructor=L,x[c]=L.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===L||"GeneratorFunction"===(n.displayName||n.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(p),e},u.awrap=function(e){return new S(e)},_(w.prototype),u.async=function(e,n,t,r){var o=new w(m(e,n,t,r));return u.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},_(p),p[l]=function(){return this},p[c]="Generator",p.toString=function(){return"[object Generator]"},u.keys=function(e){var n=[];for(var t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},u.values=R,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function t(t,r){return a.type="throw",a.arg=e,n.next=t,!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,n){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=n,o?this.next=o.finallyLoc:this.complete(a),v},complete:function(e,n){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&n&&(this.next=n)},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),T(t),v}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var o=r.arg;T(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:R(e),resultName:n,nextLoc:t},v}}}function m(e,n,r,o){var i=n&&n.prototype instanceof g?n:g,a=Object.create(i.prototype),l=new A(o||[]);return a._invoke=function(e,n,r){var o=d;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return B()}for(;;){var l=r.delegate;if(l){if("return"===i||"throw"===i&&l.iterator[i]===t){r.delegate=null;var c=l.iterator.return;if(c){var s=y(c,l.iterator,a);if("throw"===s.type){i="throw",a=s.arg;continue}}if("return"===i)continue}var s=y(l.iterator[i],l.iterator,a);if("throw"===s.type){r.delegate=null,i="throw",a=s.arg;continue}i="next",a=t;var u=s.arg;if(!u.done)return o=b,u;r[l.resultName]=u.value,r.next=l.nextLoc,r.delegate=null}if("next"===i)r.sent=r._sent=a;else if("throw"===i){if(o===d)throw o=h,a;r.dispatchException(a)&&(i="next",a=t)}else"return"===i&&r.abrupt("return",a);o=f;var s=y(e,n,r);if("normal"===s.type){o=r.done?h:b;var u={value:s.arg,done:r.done};if(s.arg!==v)return u;r.delegate&&"next"===i&&(a=t)}else"throw"===s.type&&(o=h,i="throw",a=s.arg)}}}(e,r,l),a}function y(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}function g(){}function L(){}function x(){}function _(e){["next","throw","return"].forEach(function(n){e[n]=function(e){return this._invoke(n,e)}})}function S(e){this.arg=e}function w(e){function n(t,r,i,a){var l=y(e[t],e,r);if("throw"!==l.type){var c=l.arg,s=c.value;return s instanceof S?o.resolve(s.arg).then(function(e){n("next",e,i,a)},function(e){n("throw",e,i,a)}):o.resolve(s).then(function(e){c.value=e,i(c)},a)}a(l.arg)}var t;"object"===("undefined"==typeof process?"undefined":r(process))&&process.domain&&(n=process.domain.bind(n)),this._invoke=function(e,r){function i(){return new o(function(t,o){n(e,r,t,o)})}return t=t?t.then(i,i):i()}}function E(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function T(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function R(e){if(e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:B}}function B(){return{value:t,done:!0}}}("object"===("undefined"==typeof global?"undefined":r(global))?global:"object"===("undefined"==typeof window?"undefined":r(window))?window:"object"===("undefined"==typeof self?"undefined":r(self))?self:void 0)},{"es6-promise":7}],27:[function(e,n,t){"use strict";var r=e("mout/object/forIn");n.exports=function(e,n){var t=document.createElement(e);return r(n||{},function(e,n){t[n]=e}),t}},{"mout/object/forIn":16}],28:[function(e,n,t){"use strict";var r=e("mout/array/removeAll"),o=e("nyks/function/detach"),i=[];new MutationObserver(function(){i.length&&i.slice().forEach(function(e){document.documentElement.contains(e.dom)||(r(i,e),o(e.cb).call())})}).observe(document.documentElement,{childList:!0,subtree:!0}),n.exports=function(e,n){i.push({dom:e,cb:n})}},{"mout/array/removeAll":10,"nyks/function/detach":25}],29:[function(e,n,t){"use strict";n.exports=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}},{}]},{},[26,1]);